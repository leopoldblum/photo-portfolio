---
import Layout from "../layouts/Layout.astro";
import type { ApiResponse } from "../../../photo-cms/src/types/apiTypes.ts";
import "/src/styles/global.css";

import ImageDisplay from "../components/ImageDisplay.astro";

const res = await fetch("http://localhost:3001/api/photoSet/");
const sets: ApiResponse = await res.json();
---

<Layout title="ok got it">
    <!-- <h1 class="font-extrabold text-5xl">
        {sets.docs[0].project.title}
    </h1>

    {
        sets.docs.map((sets) => (
            <ImageDisplay srcImage={sets.} />
        ))
    } -->

    {
        sets.docs.map( (projectSet) => (
            <h1 class="font-extrabold text-5xl bg-teal-400/50">
                {projectSet.project.title}
            </h1>

            <div class="bg-fuchsia-400/20">
                {
                    projectSet.images.map( (image) => (
                        <ImageDisplay srcImage={image.image} />
                    ))
                }
            </div>
        ))
    }
</Layout>
