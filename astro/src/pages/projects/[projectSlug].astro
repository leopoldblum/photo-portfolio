---
import type { WebsiteLayout } from "../../../../photo-cms/src/types/apiTypes";
import Layout from "../../layouts/Layout.astro";
import ImageCarouselReact from "../../components/ImageCarouselReact";

export async function getStaticPaths() {
    const res = await fetch("http://localhost:3001/api/globals/websiteLayout");
    const websitelayout: WebsiteLayout = await res.json();

    const allPhotoSetWrappers = websitelayout.photosets;

    allPhotoSetWrappers.map((el) => console.log(el.photoset.project.slugTitle));

    return allPhotoSetWrappers.map(({ photoset }) => ({
        params: {
            projectSlug: photoset.project.slugTitle,
        },
        props: { photoset },
    }));
}

const { photoset } = Astro.props;
---

<Layout title={photoset.project.title}>
    <div class="">
        <!-- <div>This is the slug: {photoset.project.slugTitle}!</div>
        <div>This is the real title: {photoset.project.title}!</div>
        <div>This has so many pictures: {photoset.images.length}!</div> -->

        <ImageCarouselReact client:load photoSet={photoset} />
    </div>
</Layout>
