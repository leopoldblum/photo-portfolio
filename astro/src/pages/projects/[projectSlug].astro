---
import type { WebsiteLayout } from "../../../../photo-cms/src/types/apiTypes";
import LayoutProjects from "../../layouts/LayoutProjects.astro";
import ImageCarouselWithModal from "../../components/ImageCarouselWithModal";

export async function getStaticPaths() {
    const db_url = import.meta.env.PUBLIC_API_URL;

    const res = await fetch(`${db_url}/api/globals/websiteLayout`);
    const websitelayout: WebsiteLayout = await res.json();

    const allPhotoProjectWrappers = websitelayout.photoProjects;

    return allPhotoProjectWrappers.map(({ photoProject }) => ({
        params: {
            projectSlug: photoProject.slugTitle,
        },
        props: { photoProject },
    }));
}

const { photoProject } = Astro.props;
---

<LayoutProjects title={photoProject.title}>
    <div class="w-full">
        <ImageCarouselWithModal client:only="react" photoProject={photoProject} />
    </div>
</LayoutProjects>
